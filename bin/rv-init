#!/bin/bash

# Usage:
#   rv-init <ruby_selector> [gem_name]+
#
# Create a gemsh gem environment, by default at .rv/<ruby_selector>,
# and install the (optional) named gems into it.
# Set $GEMENV to override the gem environment location.
# Chruby must already know about the ruby named by <ruby_selector>
# before running this for the gem installation to work.

set -e
set -u

ruby=$1
shift
gems=$*

: ${GEMENV:=".rv/${ruby}"}

mkdir -p ${GEMENV}
gemsh ${GEMENV}

if [ ! -z "${gems}" ]; then
  rv $ruby ruby -S gem install ${gems}
fi
